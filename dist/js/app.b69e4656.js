(function(){"use strict";var e={6103:function(e,t,a){var G=a(5130),C=a(3178),A=a(6768);const n={style:{margin:"0 24px","padding-bottom":"24px"}};function T(e,t,a,G,C,T){const s=(0,A.g2)("MainView");return(0,A.uX)(),(0,A.CE)("div",n,[(0,A.bF)(s)])}const s={class:"steps-content"},r={key:0},i={key:1},o={key:2},l={key:3},u={key:4},p={key:5},c={class:"steps-action"};function d(e,t,a,G,C,n){const T=(0,A.g2)("a-steps"),d=(0,A.g2)("StepInitParams"),m=(0,A.g2)("StepGeneInfo"),g=(0,A.g2)("StepSpacerConfig"),h=(0,A.g2)("ResultChart"),f=(0,A.g2)("StepGaParams"),y=(0,A.g2)("StepResult"),b=(0,A.g2)("a-button");return(0,A.uX)(),(0,A.CE)("div",null,[(0,A.bF)(T,{current:G.current,items:G.items},null,8,["current","items"]),(0,A.Lk)("div",s,["init-params"==G.steps[G.current].content?((0,A.uX)(),(0,A.CE)("div",r,[(0,A.bF)(d,{onUpdateInitParamsData:n.onUpdateInitParamsData},null,8,["onUpdateInitParamsData"])])):(0,A.Q3)("",!0),"gene-info"==G.steps[G.current].content?((0,A.uX)(),(0,A.CE)("div",i,[(0,A.bF)(m,{initParamsData:e.initParams,onUpdateGeneInfoData:n.onUpdateGeneInfoData},null,8,["initParamsData","onUpdateGeneInfoData"])])):(0,A.Q3)("",!0),"spacer-params"==G.steps[G.current].content?((0,A.uX)(),(0,A.CE)("div",o,[(0,A.bF)(g,{initParamsData:e.initParams,"spacer-config-input":e.spacerConfig,onUpdateSpacerConfig:t[0]||(t[0]=t=>e.spacerConfig=t)},null,8,["initParamsData","spacer-config-input"])])):(0,A.Q3)("",!0),"20nt-sequence"==G.steps[G.current].content?((0,A.uX)(),(0,A.CE)("div",l,[(0,A.bF)(h,{spacerConfig:e.spacerConfig},null,8,["spacerConfig"])])):(0,A.Q3)("",!0),"ga-params"==G.steps[G.current].content?((0,A.uX)(),(0,A.CE)("div",u,[(0,A.bF)(f,{onUpdateGaParamsData:n.onUpdateGaParamsData},null,8,["onUpdateGaParamsData"])])):(0,A.Q3)("",!0),"result"==G.steps[G.current].content?((0,A.uX)(),(0,A.CE)("div",p,[(0,A.bF)(y,{"init-params":e.initParams,"gene-info":e.geneInfo,sequence20nt:e.sequence20nt,"ga-params":e.gaParams},null,8,["init-params","gene-info","sequence20nt","ga-params"])])):(0,A.Q3)("",!0)]),(0,A.Lk)("div",c,[G.current<G.steps.length-1?((0,A.uX)(),(0,A.Wv)(b,{key:0,type:"primary",onClick:G.next},{default:(0,A.k6)((()=>[(0,A.eW)("Next")])),_:1},8,["onClick"])):(0,A.Q3)("",!0),G.current>0?((0,A.uX)(),(0,A.Wv)(b,{key:1,style:{"margin-left":"8px"},onClick:G.prev},{default:(0,A.k6)((()=>[(0,A.eW)("Previous")])),_:1},8,["onClick"])):(0,A.Q3)("",!0)])])}var m=a(144),g=a(7694);function h(e,t,a,G,C,n){const T=(0,A.g2)("a-select-option"),s=(0,A.g2)("a-select"),r=(0,A.g2)("a-form-item"),i=(0,A.g2)("a-slider"),o=(0,A.g2)("a-col"),l=(0,A.g2)("a-input-number"),u=(0,A.g2)("a-row"),p=(0,A.g2)("a-input"),c=(0,A.g2)("a-textarea"),d=(0,A.g2)("a-form");return(0,A.uX)(),(0,A.CE)("div",null,[(0,A.bF)(d,{model:e.initParamsData,"label-col":G.labelCol,"wrapper-col":G.wrapperCol},{default:(0,A.k6)((()=>[(0,A.bF)(r,{label:"Protein type"},{default:(0,A.k6)((()=>[(0,A.bF)(s,{style:{"margin-left":"12px",width:"120px"},onChange:n.handleProtChange,value:e.initParamsData.selectProt},{default:(0,A.k6)((()=>[(0,A.bF)(T,{value:"Cas9"},{default:(0,A.k6)((()=>[(0,A.eW)("dCas9")])),_:1}),(0,A.bF)(T,{value:"Cas12a"},{default:(0,A.k6)((()=>[(0,A.eW)("dCas12a")])),_:1}),(0,A.bF)(T,{value:"Cas12m"},{default:(0,A.k6)((()=>[(0,A.eW)("dCas12m")])),_:1}),(0,A.bF)(T,{value:"Others"},{default:(0,A.k6)((()=>[(0,A.eW)("Other")])),_:1})])),_:1},8,["onChange","value"])])),_:1}),(0,A.bF)(r,{label:"Gene number"},{default:(0,A.k6)((()=>[(0,A.bF)(u,null,{default:(0,A.k6)((()=>[(0,A.bF)(o,{span:12},{default:(0,A.k6)((()=>[(0,A.bF)(i,{value:e.initParamsData.geneNumber,"onUpdate:value":t[0]||(t[0]=t=>e.initParamsData.geneNumber=t),min:1,max:32},null,8,["value"])])),_:1}),(0,A.bF)(o,{span:4},{default:(0,A.k6)((()=>[(0,A.bF)(l,{value:e.initParamsData.geneNumber,"onUpdate:value":t[1]||(t[1]=t=>e.initParamsData.geneNumber=t),min:1,max:32,style:{"margin-left":"16px"}},null,8,["value"])])),_:1})])),_:1})])),_:1}),(0,A.bF)(r,{"has-feedback":"","validate-status":n.validateValue("pam"),help:"Should be combination of ATCGs, split by spaces",label:"PAM Sequence"},{default:(0,A.k6)((()=>[(0,A.bF)(p,{value:e.initParamsData.pamSequence,"onUpdate:value":t[2]||(t[2]=t=>e.initParamsData.pamSequence=t),disabled:e.disablePam},null,8,["value","disabled"])])),_:1},8,["validate-status"]),(0,A.bF)(r,{label:"PAM position"},{default:(0,A.k6)((()=>[(0,A.bF)(s,{value:e.initParamsData.seqPosition,disabled:e.disableSeqPosition},{default:(0,A.k6)((()=>[(0,A.bF)(T,{value:"before"},{default:(0,A.k6)((()=>[(0,A.eW)("Before target")])),_:1}),(0,A.bF)(T,{value:"after"},{default:(0,A.k6)((()=>[(0,A.eW)("After target")])),_:1})])),_:1},8,["value","disabled"])])),_:1}),(0,A.bF)(r,{label:"Length of target"},{default:(0,A.k6)((()=>[(0,A.bF)(l,{value:e.initParamsData.targetLength,"onUpdate:value":t[3]||(t[3]=t=>e.initParamsData.targetLength=t),min:e.targetLengthMin,max:e.targetLengthMax,disabled:e.disableTargetLength},null,8,["value","min","max","disabled"])])),_:1}),(0,A.bF)(r,{"has-feedback":"","validate-status":n.validateValue("insulator"),help:"Should be combination of ATCGs",label:"Promoter"},{default:(0,A.k6)((()=>[(0,A.bF)(c,{showCount:!1,value:e.initParamsData.insulatorSequence,"onUpdate:value":t[4]||(t[4]=t=>e.initParamsData.insulatorSequence=t)},null,8,["value"])])),_:1},8,["validate-status"]),(0,A.bF)(r,{"has-feedback":"","validate-status":n.validateValue("spacer"),help:"Should be combination of AGCUs",label:"Repeat sequence"},{default:(0,A.k6)((()=>[(0,A.bF)(c,{showCount:!1,value:e.initParamsData.spacerSequence,"onUpdate:value":t[5]||(t[5]=t=>e.initParamsData.spacerSequence=t)},null,8,["value"])])),_:1},8,["validate-status"])])),_:1},8,["model","label-col","wrapper-col"])])}const f={style:{width:"150px"}},y={span:14};var b={name:"StepInitParams",setup(){return{labelCol:f,wrapperCol:y}},emits:["updateInitParamsData"],methods:{handleProtChange(e){if(console.log("handleProtChange",e),this.initParamsData.selectProt=e,this.initParamsData.pamSequence=this.protPamMap[e],"Others"===e)this.disablePam=!1,this.disableSeqPosition=!1,this.disableTargetLength=!1,this.initParamsData.seqPosition="before",this.initParamsData.spacerSequence="",this.initParamsData.insulatorSequence="";else switch(this.disablePam=!0,this.disableSeqPosition=!0,this.disableTargetLength=!0,this.initParamsData.seqPosition="before",e){case"Cas12a":this.disableTargetLength=!1,this.initParamsData.targetLength=23,this.targetLengthMin=23,this.targetLengthMax=25,this.initParamsData.spacerSequence="TAATTTCTACTGTTGTAGAT";break;case"Cas9":this.initParamsData.targetLength=20,this.initParamsData.seqPosition="after",this.initParamsData.spacerSequence="GUUUGAGAGUUGUGUAAUUUAAGAUGGAUCUCAAAC";break;case"Cas12m":this.initParamsData.targetLength=20,this.initParamsData.spacerSequence="GUGUCAUAGCCCAGCUUGGCGGGCGAAGGCCAAGAC";break}},validateValue(e){switch(e){case"pam":for(let e=0;e<this.initParamsData.pamSequence.length;e++){let t=this.initParamsData.pamSequence.charAt(e);if(!["A","T","C","G"," "].includes(t))return"error"}break;case"insulator":for(let e=0;e<this.initParamsData.insulatorSequence.length;e++){let t=this.initParamsData.insulatorSequence.charAt(e);if(!["A","T","C","G"].includes(t))return"error"}break;case"spacer":for(let e=0;e<this.initParamsData.spacerSequence.length;e++){let t=this.initParamsData.spacerSequence.charAt(e);if(!["A","T","C","G","U"].includes(t))return"error"}break}return"success"}},data:()=>({protPamMap:{Cas9:"AGG TGG CGG GGG",Cas12a:"TTTA TTTG TTTC TTTT",Cas12m:"TTC TTA",Others:""},targetLengthMin:1,targetLengthMax:64,initParamsData:{selectProt:"Cas9",geneNumber:8,pamSequence:"AGG TGG CGG GGG",targetLength:20,seqPosition:"before",insulatorSequence:"AGCTGTCACCGGATGTGCTTTCCGGTCTGATGAGTCCGTGAGGACGAAACAGCCTCTACAAATAATTTTGTTTAA",spacerSequence:"GUUUGAGAGUUGUGUAAUUUAAGAUGGAUCUCAAAC"},disablePam:!1,disableTargetLength:!1,disableSeqPosition:!1}),watch:{initParamsData:{deep:!0,handler(e){console.log("updateInitParamsData",e),this.$emit("updateInitParamsData",e)},immediate:!0}},beforeMount(){this.$emit("updateInitParamsData",this.initParamsData),this.initParamsData.selectProt="Cas9",this.initParamsData.pamSequence=this.protPamMap[this.initParamsData.selectProt],this.disablePam=!0,this.disableSeqPosition=!0,this.disableTargetLength=!0,this.handleProtChange("Cas9")},created(){this.$emit("updateInitParamsData",this.initParamsData)}},v=a(1241);const k=(0,v.A)(b,[["render",h]]);var _=k;function P(e,t,a,G,C,n){const T=(0,A.g2)("a-button"),s=(0,A.g2)("a-textarea"),r=(0,A.g2)("a-modal"),i=(0,A.g2)("a-input"),o=(0,A.g2)("a-form-item"),l=(0,A.g2)("a-checkbox-group"),u=(0,A.g2)("a-form");return(0,A.uX)(),(0,A.CE)("div",null,[(0,A.bF)(T,{style:{"margin-left":"24px"},icon:G.h(G.ImportOutlined),onClick:t[0]||(t[0]=t=>e.openImport=!0)},{default:(0,A.k6)((()=>[(0,A.eW)("Import")])),_:1},8,["icon"]),(0,A.bF)(r,{open:e.openImport,"onUpdate:open":t[2]||(t[2]=t=>e.openImport=t),title:"Import data",onOk:n.handleOk},{default:(0,A.k6)((()=>[(0,A.bF)(s,{value:e.importValue,"onUpdate:value":t[1]||(t[1]=t=>e.importValue=t),placeholder:"CSV: name, sequence, Binds to coding strand(0/1), Binds to non-coding strand(0/1)",rows:5},null,8,["value"])])),_:1},8,["open","onOk"]),(0,A.bF)(u,{model:e.geneInfoData,"label-col":G.labelCol,"wrapper-col":G.wrapperCol,layout:"horizontal"},{default:(0,A.k6)((()=>[((0,A.uX)(!0),(0,A.CE)(A.FK,null,(0,A.pI)(e.geneInfoData,(t=>((0,A.uX)(),(0,A.CE)("div",{key:t.geneName},[(0,A.bF)(o,{label:"Gene name","has-feedback":"","validate-status":n.validateGeneName(t.geneName),help:"Gene name should be unique"},{default:(0,A.k6)((()=>[(0,A.bF)(i,{value:t.geneName,"onUpdate:value":e=>t.geneName=e},null,8,["value","onUpdate:value"])])),_:2},1032,["validate-status"]),(0,A.bF)(o,{label:"Gene sequence","has-feedback":"","validate-status":n.validateGeneSeq(t.geneSequence),help:"Gene sequence should not be empty"},{default:(0,A.k6)((()=>[(0,A.bF)(s,{value:t.geneSequence,"onUpdate:value":e=>t.geneSequence=e},null,8,["value","onUpdate:value"])])),_:2},1032,["validate-status"]),(0,A.bF)(o,{label:"Option"},{default:(0,A.k6)((()=>[(0,A.bF)(l,{value:t.option,"onUpdate:value":e=>t.option=e,options:e.options},null,8,["value","onUpdate:value","options"])])),_:2},1024)])))),128))])),_:1},8,["model","label-col","wrapper-col"])])}a(4114);var x=a(3277);const q={style:{width:"250px"}},F={span:14};var w={name:"StepGeneInfo",setup(){return{labelCol:q,wrapperCol:F,h:A.h,ImportOutlined:x.A}},props:{initParamsData:{type:Object,required:!0}},emits:["updateGeneInfoData"],methods:{handleOk(){this.openImport=!1;const e=this.importValue.split("\n");for(const t in e){const a=e[t].split("\t").map((e=>e.trim()));4===a.length&&(this.geneInfoData[t]={geneName:a[0],geneSequence:a[1],option:[]},this.geneInfoData[t].option.push("1"===a[2]?"coding":""),this.geneInfoData[t].option.push("1"===a[3]?"non-coding":""))}},validateGeneName(e){const t=this.geneInfoData.map((e=>e.geneName));return t.filter((t=>t===e)).length>1||""===e?"error":"success"},validateGeneSeq(e){return""===e?"error":"success"}},data:()=>({options:[{label:"Binds to coding strand",value:"coding",disabled:!1},{label:"Binds to non-coding strand",value:"non-coding",disabled:!1}],geneInfoData:[],openImport:!1,importValue:"",defaultValue:[["CACTATTTTCGCTATGGTTATGCGTAAGCATTGCTGTTGCTTCGTCGCGGCAATATAATGAGAATTATTATCATTAAAAGATGATTTGAGGAGTAAGTATATGGCTGTAACTAAGCTGGTTCTGGTTCGTCATGGCGAAAGTCAGTGGAACAAAGAAAACCGTTTCACCGGTTGGTACGACGTGGATCTGTCTGAGAAAGGCGTAAGCGAAGCAAAAGCAGCAGGTAAGCTGCTGAAAGAGGAAGGTTACAGCTTTGACTTTGCTTACACTTCTGTGCTGAAACGCGCTATCCATACCCTGTGGAATGTGCTGGACGAACTGGATCAGGCATGGCTGCCCGTTGAGAAATCCTGGAAACTGAACGAACGTCACTACGGTGCGTTGCAGGGTCTGAACAAA","gpmA"],["GATACGTGTAGGCCTGATAAGCGTAGCGCATCAGGCAATTTTGCTTTTGGCGAAAAAAAGACCCGCAGAGCGGGCCTTGAGATAAGCAGAAAGGAATATCTTACAGAACGTCGATCGCGTTCAGTTCCTGGAATGCTTTCTCCAGACGAGCGATCATCGAAGTCTGACCGGCACGCAGCCATACGCGCGGATCGTAGTATTTCTTGTTCGGCTGATCTTCGCCTTTCGGGTTACCCAGCTGACCCTGCAGATAAGCTTCGTTCGCTTTGTAGTAGTTCAGAACGCCTTCCCAGGTTGCCCATTGGGTATCGGTATCGATGTTCATTTTTACTACGCCGTAGCTTACGGAGTCTTTGATTTCCTGAGCAGTAGAACCGGAACCACCGTGGAATACGAAGTT","fbaA"],["GCGAGGCACCACCACTTTCGTAATACCGGATTCGCTTTCCGGCAGTGCGCCCAGAAAGCAAGTTTCTCCCATCCTTCTCAACTTAAAGACTAAGACTGTCATGAAAAAGACCAAAATTGTTTGCACCATCGGACCGAAAACCGAATCTGAAGAGATGTTAGCTAAAATGCTGGACGCTGGCATGAACGTTATGCGTCTGAACTTCTCTCATGGTGACTATGCAGAACACGGTCAGCGCATTCAGAATCTGCGCAACGTGATGAGCAAAACTGGTAAAACCGCCGCTATCCTGCTTGATACCAAAGGTCCGGAAATCCGCACCATGAAACTGGAAGGCGGTAACGACGTTTCTCTGAAAGCTGGTCAGACCTTTACTTTCACCACTGATAAATCTGTTATC","pykF"],["TCTGCAAAATTTTAAATAAAGCTCCAATAAATCATATTGTTAATTTCTTCACTTTCCGCTGATTCGGTGCCAGACTGAAATCAGCCTATAGGAGGAAATGATGGTACGTATCTATACGTTGACACTTGCGCCCTCTCTCGATAGCGCAACAATTACCCCGCAAATTTATCCCGAAGGAAAACTGCGCTGTACCGCACCGGTGTTCGAACCCGGGGGCGGCGGCATCAACGTCGCCCGCGCCATTGCCCATCTTGGAGGCAGTGCCACAGCGATCTTCCCGGCGGGTGGCGCGACCGGCGAACACCTGGTTTCACTGTTGGCGGATGAAAATGTCCCCGTCGCTACTGTAGAAGCCAAAGACTGGACCCGGCAGAATTTACACGTACATGTGGAAGCAAGC","pfkB"],["ACGACATCCGAATGAGATTAATTTATCGCCATCGCGGCGTTATTTCATTCGGATTTCATGTTCAAGCAACACCTGGTTGTTTCAGTCAACGGAGTATTACATGTCCAGAAGGCTTCGCAGAACAAAAATCGTTACCACGTTAGGCCCAGCAACAGATCGCGATAATAATCTTGAAAAAGTTATCGCGGCGGGTGCCAACGTTGTACGTATGAACTTTTCTCACGGCTCGCCTGAAGATCACAAAATGCGCGCGGATAAAGTTCGTGAGATTGCCGCAAAACTGGGGCGTCATGTGGCTATTCTGGGTGACCTCCAGGGGCCCAAAATCCGTGTATCCACCTTTAAAGAAGGCAAAGTTTTCCTCAATATTGGGGATAAATTCCTGCTCGACGCCAACCTG","pykA"],["GCCGCGAGCGGTCGTATATTTTGATCTTCAGAGGCTATTTTATCGATTCAGCTGTAGTAAAATTACGCAAATTTTGACTCTTGAGTATGAGGTTGTCGCAATGTTGGTTTCTAAAAAACCTATGGTACTGGTGATTCTGGATGGCTATGGCTATCGCGAAGAACAGCAGGATAACGCCATTTTTAGTGCTAAAACCCCGGTAATGGATGCACTGTGGGCCAATCGTCCGCATACCCTAATCGACGCTTCCGGTCTGGAAGTCGGTCTGCCTGACCGTCAGATGGGTAACTCCGAAGTAGGCCACGTTAACCTGGGTGCCGGCCGCATCGTGTATCAGGACCTGACTCGTCTGGACGTTGAAATCAAAGATCGCGCTTTCTTTGCTAATCCGGTGCTGACT","gpmM"],["GTGATTGTTATACTATTTGCACATTCGTTGGATCACTTCGATGTGCAAGAAGACTTCCGGCAACAGATTTCATTTTGCATTCCAAAGTTCAGAGGTAGTCATGATTAAGAAAATCGGTGTGTTGACAAGCGGCGGTGATGCGCCAGGCATGAACGCCGCAATTCGCGGGGTTGTTCGTTCTGCGCTGACAGAAGGTCTGGAAGTAATGGGTATTTATGACGGCTATCTGGGTCTGTATGAAGACCGTATGGTACAGCTAGACCGTTACAGCGTGTCTGACATGATCAACCGTGGCGGTACGTTCCTCGGTTCTGCGCGTTTCCCGGAATTCCGCGACGAGAACATCCGCGCCGTGGCTATCGAAAACCTGAAAAAACGTGGTATCGACGCGCTGGTGGTT","pfkA"],["GCATGATAAGACGCTTCAGCGTCGCATCAGGCATAGGTTGCCGGATGCAGCGTAAACGCCTTATCCGTCCTACGGGGTGGTGTTGTTCGTATAAGGCGTATCAGGCGATAGTAATTTTGCTATCGAGATAAACGTCCTGCACGGCGTTAATCAGTTTCACGCCGTCAGCCATCGATTTCTTGAACGCTTTACGTCCAAGAATCAGCCCCATTCCGCCTGCGCGTTTGTTGATAACCGCAGTACGCACTGCATCGCTGAGGTCAGTTTCACCGCCCGCAGCACCGCCGGAGTTTATCAACCCAGCCCGACCCATATAGCAGTTAGCTAACTGATAACGCACCAGATCAATCGGGTTTTCGCTGGTCAATTTGCTGTAAACACGATCGTCGGTGTAACCGTA","fbaB"]]}),beforeMount(){let e=[];switch(this.initParamsData.selectProt){case"Cas9":this.options[0].disabled=!0,this.options[1].disabled=!1,e=["coding","non-coding"];break;case"Cas12m":case"Cpf1":case"Cas12a":this.options[0].disabled=!1,this.options[1].disabled=!1,e=["coding"];break}console.log(this.initParamsData.selectProt,e,this.options),this.geneInfoData=[];for(let t=0;t<this.initParamsData.geneNumber;t++)this.geneInfoData.push({geneName:this.defaultValue[t]?this.defaultValue[t][1]:`Gene ${t+1}`,geneSequence:this.defaultValue[t]?this.defaultValue[t][0]:"",option:this.defaultValue[t]?Array.from(["coding","non-coding"]):[]})},watch:{geneInfoData:{deep:!0,handler(e){this.$emit("updateGeneInfoData",e)}}}};const D=(0,v.A)(w,[["render",P]]);var S=D;function I(e,t,a,G,C,n){const T=(0,A.g2)("a-select-option"),s=(0,A.g2)("a-select"),r=(0,A.g2)("a-form-item"),i=(0,A.g2)("a-button"),o=(0,A.g2)("a-form"),l=(0,A.g2)("s-table"),u=(0,A.g2)("a-spin");return(0,A.uX)(),(0,A.Wv)(u,{spinning:e.isLoading},{default:(0,A.k6)((()=>[(0,A.bF)(o,{layout:"inline",model:e.spacerFilterConfig,style:{"margin-bottom":"12px","margin-left":"12px"}},{default:(0,A.k6)((()=>[(0,A.bF)(r,{label:"Off Target"},{default:(0,A.k6)((()=>[(0,A.bF)(s,{value:e.spacerFilterConfig.offtarget_threshold,"onUpdate:value":t[0]||(t[0]=t=>e.spacerFilterConfig.offtarget_threshold=t),style:{width:"150px"},placeholder:"Select a option"},{default:(0,A.k6)((()=>[(0,A.bF)(T,{value:"10"},{default:(0,A.k6)((()=>[(0,A.eW)("Top 10%")])),_:1}),(0,A.bF)(T,{value:"20"},{default:(0,A.k6)((()=>[(0,A.eW)("Top 20%")])),_:1}),(0,A.bF)(T,{value:"30"},{default:(0,A.k6)((()=>[(0,A.eW)("Top 30%")])),_:1}),(0,A.bF)(T,{value:"40"},{default:(0,A.k6)((()=>[(0,A.eW)("Top 40%")])),_:1}),(0,A.bF)(T,{value:"50"},{default:(0,A.k6)((()=>[(0,A.eW)("Top 50%")])),_:1})])),_:1},8,["value"])])),_:1}),(0,A.bF)(r,{label:"Efficiency"},{default:(0,A.k6)((()=>[(0,A.bF)(s,{value:e.spacerFilterConfig.effiency_threshold,"onUpdate:value":t[1]||(t[1]=t=>e.spacerFilterConfig.effiency_threshold=t),style:{width:"150px"},placeholder:"Select a option"},{default:(0,A.k6)((()=>[(0,A.bF)(T,{value:"10"},{default:(0,A.k6)((()=>[(0,A.eW)("Last 10%")])),_:1}),(0,A.bF)(T,{value:"20"},{default:(0,A.k6)((()=>[(0,A.eW)("Last 20%")])),_:1}),(0,A.bF)(T,{value:"30"},{default:(0,A.k6)((()=>[(0,A.eW)("Last 30%")])),_:1}),(0,A.bF)(T,{value:"40"},{default:(0,A.k6)((()=>[(0,A.eW)("Last 40%")])),_:1}),(0,A.bF)(T,{value:"50"},{default:(0,A.k6)((()=>[(0,A.eW)("Last 50%")])),_:1})])),_:1},8,["value"])])),_:1}),(0,A.bF)(r,{label:"Energy"},{default:(0,A.k6)((()=>[(0,A.bF)(s,{value:e.spacerFilterConfig.energy_threshold,"onUpdate:value":t[2]||(t[2]=t=>e.spacerFilterConfig.energy_threshold=t),style:{width:"150px"},placeholder:"Select a option"},{default:(0,A.k6)((()=>[(0,A.bF)(T,{value:"10"},{default:(0,A.k6)((()=>[(0,A.eW)("Last 10%")])),_:1}),(0,A.bF)(T,{value:"20"},{default:(0,A.k6)((()=>[(0,A.eW)("Last 20%")])),_:1}),(0,A.bF)(T,{value:"30"},{default:(0,A.k6)((()=>[(0,A.eW)("Last 30%")])),_:1}),(0,A.bF)(T,{value:"40"},{default:(0,A.k6)((()=>[(0,A.eW)("Last 40%")])),_:1}),(0,A.bF)(T,{value:"50"},{default:(0,A.k6)((()=>[(0,A.eW)("Last 50%")])),_:1})])),_:1},8,["value"])])),_:1}),(0,A.bF)(r,null,{default:(0,A.k6)((()=>[(0,A.bF)(i,{type:"primary",onClick:e.applyFilter},{default:(0,A.k6)((()=>[(0,A.eW)("Filter")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),(0,A.bF)(l,{columns:e.columns,"data-source":e.chartData,stripe:"",scroll:{x:2e3},"expand-row-by-click":""},{bodyCell:(0,A.k6)((({column:t,record:a})=>["operation"===t.key?((0,A.uX)(),(0,A.CE)(A.FK,{key:0},["-"!==a.CrisprScan_score||"-"!==a.Chari_score?((0,A.uX)(),(0,A.Wv)(i,{key:0,type:"link",onClick:t=>e.removeRow(a.key)},{default:(0,A.k6)((()=>[(0,A.eW)("Remove")])),_:2},1032,["onClick"])):(0,A.Q3)("",!0)],64)):(0,A.Q3)("",!0)])),_:1},8,["columns","data-source"])])),_:1},8,["spinning"])}var N=(0,A.pM)({props:{spacerConfig:{type:Object,required:!0}},data(){return{spacerFilterConfig:{offtarget_threshold:"50",effiency_threshold:"10",energy_threshold:"10"},isLoading:!0,backendData:[],selectedRowKeys:[]}},computed:{chartData(){return this.backendData.map((e=>{const t={key:e.key,origin:e,Gene:e.Gene,spacer:e.spacer,"free energy":e["free energy"],"target-sequence":"-",CropIT_score:"-",CCTop_score:"-",HsuSupp_score:"-",CFD_score:"-",CrisprScan_score:this.formatNumber(e.efficiency.CrisprScan_score,6),Chari_score:this.formatNumber(e.efficiency.Chari_score,6),Housden_score:this.formatNumber(e.efficiency.Housden_score,6)};if(1===e["off-target"].length){const a=e["off-target"][0];t["target-sequence"]=a["target-sequence"],t["CropIT_score"]=this.formatNumber(a.CropIT_score,6),t["CCTop_score"]=this.formatNumber(a.CCTop_score,6),t["HsuSupp_score"]=this.formatNumber(a.HsuSupp_score,6),t["CFD_score"]=this.formatNumber(a.CFD_score,6)}else t["children"]=e["off-target"].map((t=>({key:t.key,Gene:e.Gene,spacer:e.spacer,"free energy":e["free energy"],"target-sequence":t["target-sequence"],CropIT_score:this.formatNumber(t.CropIT_score,6),CCTop_score:this.formatNumber(t.CCTop_score,6),HsuSupp_score:this.formatNumber(t.HsuSupp_score,6),CFD_score:this.formatNumber(t.CFD_score,6),CrisprScan_score:"-",Chari_score:"-",Housden_score:"-"})));return t}))},rowSelection:()=>({selectedRowKeys:(void 0).selectedRowKeys,onChange:(void 0).onSelectChange})},beforeMount(){console.log("mounted",this.spacerConfig),this.loadData()},methods:{formatNumber(e,t){("number"!==typeof e||"number"!==typeof t||t<0)&&(e=parseFloat(e));let a=e.toFixed(t);return a=a.replace(/\.?0+$/,""),a},onSelectChange(e){console.log("selectedRowKeys changed: ",e),this.selectedRowKeys.value=e},removeRow(e){console.log("removeRow",e),this.backendData=this.backendData.filter((t=>(console.log("remove filter",t.key,e),t.key!==e)))},loadData(){this.isLoading=!0,this.selectedRowKeys.value=[],pywebview.api.getSpacer(this.spacerConfig,this.spacerFilterConfig).then((e=>{this.backendData=e.map(((e,t)=>(e.key=`${t}`,e["off-target"]=e["off-target"].map(((e,a)=>(e.key=`${t}-${a}`,e))),e))),console.log("filter",this.backendData,"originData",e),this.isLoading=!1}))},applyFilter(){this.loadData()}},watch:{backendData:{deep:!0,handler(){console.log("backendData update",this.selectedRowKeys),pywebview&&pywebview.api.updateSpacer(this.backendData)}}},setup(){const e=[{title:"Gene Name",dataIndex:"Gene",key:"Gene",width:"150px"},{title:"Operation",dataIndex:"operation",key:"operation",width:"120px"},{title:"Spacer",dataIndex:"spacer",key:"spacer",width:"250px"},{title:"Free Energy",dataIndex:"free energy",key:"free energy",width:"120px"},{title:"target-sequence",dataIndex:"target-sequence",key:"target-sequence",width:"250px"},{title:"CropIT_score",dataIndex:"CropIT_score",key:"CropIT_score",width:"100px"},{title:"CCTop_score",dataIndex:"CCTop_score",key:"CCTop_score",width:"100px"},{title:"HsuSupp_score",dataIndex:"HsuSupp_score",key:"HsuSupp_score",width:"100px"},{title:"CFD_score",dataIndex:"CFD_score",key:"CFD_score",width:"100px"},{title:"CrisprScan_score",dataIndex:"CrisprScan_score",key:"CrisprScan_score",width:"120px"},{title:"Chari_score",dataIndex:"Chari_score",key:"Chari_score",width:"120px"},{title:"Housden_score",dataIndex:"Housden_score",key:"Housden_score",width:"120px"}];return{columns:e}}});const U=(0,v.A)(N,[["render",I]]);var L=U;function E(e,t,a,G,C,n){const T=(0,A.g2)("a-slider"),s=(0,A.g2)("a-col"),r=(0,A.g2)("a-input-number"),i=(0,A.g2)("a-row"),o=(0,A.g2)("a-form-item"),l=(0,A.g2)("a-form");return(0,A.uX)(),(0,A.CE)("div",null,[(0,A.bF)(l,{model:e.gaParamsData,"label-col":G.labelCol,"wrapper-col":G.wrapperCol},{default:(0,A.k6)((()=>[(0,A.bF)(o,{label:"Population size"},{default:(0,A.k6)((()=>[(0,A.bF)(i,null,{default:(0,A.k6)((()=>[(0,A.bF)(s,{span:12},{default:(0,A.k6)((()=>[(0,A.bF)(T,{value:e.gaParamsData.population,"onUpdate:value":t[0]||(t[0]=t=>e.gaParamsData.population=t),min:10,max:1e4},null,8,["value"])])),_:1}),(0,A.bF)(s,{span:4},{default:(0,A.k6)((()=>[(0,A.bF)(r,{value:e.gaParamsData.population,"onUpdate:value":t[1]||(t[1]=t=>e.gaParamsData.population=t),min:10,max:1e4,style:{"margin-left":"16px"}},null,8,["value"])])),_:1})])),_:1})])),_:1}),(0,A.bF)(o,{label:"Termination generation"},{default:(0,A.k6)((()=>[(0,A.bF)(i,null,{default:(0,A.k6)((()=>[(0,A.bF)(s,{span:12},{default:(0,A.k6)((()=>[(0,A.bF)(T,{value:e.gaParamsData.termination,"onUpdate:value":t[2]||(t[2]=t=>e.gaParamsData.termination=t),min:10,max:1e3},null,8,["value"])])),_:1}),(0,A.bF)(s,{span:4},{default:(0,A.k6)((()=>[(0,A.bF)(r,{value:e.gaParamsData.termination,"onUpdate:value":t[3]||(t[3]=t=>e.gaParamsData.termination=t),min:10,max:1e3,style:{"margin-left":"16px"}},null,8,["value"])])),_:1})])),_:1})])),_:1}),(0,A.bF)(o,{label:"Crossover probability"},{default:(0,A.k6)((()=>[(0,A.bF)(r,{value:e.gaParamsData.crossover,"onUpdate:value":t[4]||(t[4]=t=>e.gaParamsData.crossover=t),min:0,max:.99,step:.01,style:{"margin-left":"16px"}},null,8,["value"])])),_:1}),(0,A.bF)(o,{label:"Mutation probability"},{default:(0,A.k6)((()=>[(0,A.bF)(r,{value:e.gaParamsData.mutation,"onUpdate:value":t[5]||(t[5]=t=>e.gaParamsData.mutation=t),min:0,max:1,step:1e-4,style:{"margin-left":"16px"}},null,8,["value"])])),_:1}),(0,A.bF)(o,{label:"Tournament size"},{default:(0,A.k6)((()=>[(0,A.bF)(i,null,{default:(0,A.k6)((()=>[(0,A.bF)(s,{span:12},{default:(0,A.k6)((()=>[(0,A.bF)(T,{value:e.gaParamsData.tournament,"onUpdate:value":t[6]||(t[6]=t=>e.gaParamsData.tournament=t),min:2,max:e.gaParamsData.population},null,8,["value","max"])])),_:1}),(0,A.bF)(s,{span:4},{default:(0,A.k6)((()=>[(0,A.bF)(r,{value:e.gaParamsData.tournament,"onUpdate:value":t[7]||(t[7]=t=>e.gaParamsData.tournament=t),min:2,max:e.gaParamsData.population,style:{"margin-left":"16px"}},null,8,["value","max"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","label-col","wrapper-col"])])}const W={style:{width:"200px"}},X={span:14};var O={name:"StepGaParams",setup(){return{labelCol:W,wrapperCol:X}},emits:["updateGaParamsData"],methods:{},data:()=>({gaParamsData:{population:1e3,termination:30,crossover:.7,mutation:.1,tournament:4}}),watch:{gaParamsData:{deep:!0,handler(e){console.log("updateGaParamsData",e),this.$emit("updateGaParamsData",e)},immediate:!0}}};const M=(0,v.A)(O,[["render",E]]);var R=M,K=a(4232);const Q={style:{margin:"8px 16px 0","text-align":"center"}},V={key:0},$={key:1},j={key:2,style:{"text-align":"right"}},H={key:3},B={key:4},Y={ref:"chartdiv_running",style:{height:"200px","margin-top":"-12px","margin-bottom":"16px"}},z=(0,A.Lk)("h4",{style:{"margin-top":"-32px"}},"Iteration",-1),J={key:5},Z={ref:"chartdiv_energy",style:{height:"200px","margin-top":"-12px","margin-bottom":"16px"}},ee=(0,A.Lk)("h4",{style:{"margin-top":"-32px"}},"Minimum free energy (KCal/mol)",-1),te={style:{"text-align":"right",position:"absolute","margin-top":"0px",right:"4vw"}},ae={style:{"margin-bottom":"-4px"}};function Ge(e,t,a,G,C,n){const T=(0,A.g2)("a-button"),s=(0,A.g2)("a-select-option"),r=(0,A.g2)("a-select"),i=(0,A.g2)("a-descriptions-item"),o=(0,A.g2)("a-descriptions"),l=(0,A.g2)("a-progress"),u=(0,A.g2)("a-divider"),p=(0,A.g2)("a-tooltip"),c=(0,A.g2)("a-tag"),d=(0,A.g2)("a-collapse-panel"),m=(0,A.g2)("a-collapse");return(0,A.uX)(),(0,A.CE)("div",Q,["idle"===e.status?((0,A.uX)(),(0,A.CE)("div",V,[(0,A.bF)(T,{onClick:n.startGa},{default:(0,A.k6)((()=>[(0,A.eW)("Run GA")])),_:1},8,["onClick"])])):(0,A.Q3)("",!0),"running"===e.status?((0,A.uX)(),(0,A.CE)("div",$,[e.isPaused?(0,A.Q3)("",!0):((0,A.uX)(),(0,A.Wv)(T,{key:0,onClick:t[0]||(t[0]=()=>e.isPaused=!0)},{default:(0,A.k6)((()=>[(0,A.eW)("Pause")])),_:1})),e.isPaused?((0,A.uX)(),(0,A.Wv)(T,{key:1,onClick:t[1]||(t[1]=()=>e.status="done")},{default:(0,A.k6)((()=>[(0,A.eW)("Done")])),_:1})):(0,A.Q3)("",!0),e.isPaused?((0,A.uX)(),(0,A.Wv)(T,{key:2,onClick:t[2]||(t[2]=()=>e.isPaused=!1)},{default:(0,A.k6)((()=>[(0,A.eW)("Resume")])),_:1})):(0,A.Q3)("",!0),(0,A.bF)(T,{style:{"margin-right":"12px"},icon:G.h(G.ExportOutlined),onClick:n.handleExportCopy},{default:(0,A.k6)((()=>[(0,A.eW)("Export")])),_:1},8,["icon","onClick"])])):(0,A.Q3)("",!0),"done"===e.status?((0,A.uX)(),(0,A.CE)("div",j,[(0,A.bF)(T,{style:{"margin-right":"12px"},icon:G.h(G.ExportOutlined),onClick:n.handleExportCopy},{default:(0,A.k6)((()=>[(0,A.eW)("Export")])),_:1},8,["icon","onClick"]),(0,A.bF)(r,{style:{width:"120px","margin-right":"24px","text-align":"left"},onChange:n.handleNumChange,value:e.selectNum},{default:(0,A.k6)((()=>[(0,A.bF)(s,{value:"10"},{default:(0,A.k6)((()=>[(0,A.eW)("Top 10")])),_:1}),(0,A.bF)(s,{value:"50"},{default:(0,A.k6)((()=>[(0,A.eW)("Top 50")])),_:1}),(0,A.bF)(s,{value:"100"},{default:(0,A.k6)((()=>[(0,A.eW)("Top 100")])),_:1})])),_:1},8,["onChange","value"])])):(0,A.Q3)("",!0),"running"===e.status||"done"===e.status?((0,A.uX)(),(0,A.CE)("div",H,[(0,A.bF)(o,{title:"GA Result",style:{margin:"0 24px"}},{default:(0,A.k6)((()=>[(0,A.bF)(i,{label:"Population size"},{default:(0,A.k6)((()=>[(0,A.eW)((0,K.v_)(a.gaParams.population),1)])),_:1}),(0,A.bF)(i,{label:"Termination generation"},{default:(0,A.k6)((()=>[(0,A.eW)((0,K.v_)(a.gaParams.termination),1)])),_:1}),(0,A.bF)(i,{label:"Crossover probability"},{default:(0,A.k6)((()=>[(0,A.eW)((0,K.v_)(a.gaParams.crossover),1)])),_:1}),(0,A.bF)(i,{label:"Mutation probability"},{default:(0,A.k6)((()=>[(0,A.eW)((0,K.v_)(a.gaParams.mutation),1)])),_:1})])),_:1})])):(0,A.Q3)("",!0),"running"===e.status?((0,A.uX)(),(0,A.CE)("div",B,[(0,A.bF)(l,{percent:e.nowIter/a.gaParams.termination*100,status:"active","show-info":!1,style:{padding:"0 24px"}},null,8,["percent"]),(0,A.Lk)("p",null,"Iteration: "+(0,K.v_)(e.nowIter)+"/"+(0,K.v_)(a.gaParams.termination),1),(0,A.Lk)("div",Y,null,512),z])):"done"===e.status?((0,A.uX)(),(0,A.CE)("div",J,[(0,A.Lk)("div",Z,null,512),ee,(0,A.bF)(u),(0,A.bF)(m,{activeKey:e.activeKey,"onUpdate:activeKey":t[3]||(t[3]=t=>e.activeKey=t)},{default:(0,A.k6)((()=>[((0,A.uX)(!0),(0,A.CE)(A.FK,null,(0,A.pI)(e.resultList,((e,t)=>((0,A.uX)(),(0,A.Wv)(d,{key:t,header:"#"+(t+1)+", minimum free energy: "+e.freeEnergy},{default:(0,A.k6)((()=>[(0,A.Lk)("div",te,[(0,A.bF)(p,{title:"Copy sequence"},{default:(0,A.k6)((()=>[(0,A.bF)(T,{icon:G.h(G.CopyOutlined),onClick:t=>n.handleSequenceCopy(e.geneList)},null,8,["icon","onClick"])])),_:2},1024),(0,A.bF)(p,{title:"Export RNA Figure"},{default:(0,A.k6)((()=>[(0,A.bF)(T,{icon:G.h(G.FileImageOutlined),onClick:t=>n.handleExportImage(e)},null,8,["icon","onClick"])])),_:2},1024)]),(0,A.Lk)("p",ae,[((0,A.uX)(!0),(0,A.CE)(A.FK,null,(0,A.pI)(e.geneList,((e,t)=>((0,A.uX)(),(0,A.CE)("span",{key:t,style:(0,K.Tr)("color: "+G.stringToColor(e.type))},[(0,A.bF)(c,{style:{"word-break":"break-all","margin-left":"10px","margin-right":"2px"},color:G.stringToColor(e.type)},{default:(0,A.k6)((()=>[(0,A.eW)((0,K.v_)(e.type),1)])),_:2},1032,["color"]),1!==t&&"spacer"===e.type?((0,A.uX)(),(0,A.Wv)(p,{key:0,title:e.type,color:G.stringToColor(e.type),mouseEnterDelay:0,mouseLeaveDelay:0},null,8,["title","color"])):((0,A.uX)(),(0,A.Wv)(p,{key:1,title:e.type,color:G.stringToColor(e.type),mouseEnterDelay:0,mouseLeaveDelay:0},{default:(0,A.k6)((()=>[(0,A.eW)((0,K.v_)(e.sequence),1)])),_:2},1032,["title","color"]))],4)))),128))])])),_:2},1032,["header"])))),128))])),_:1},8,["activeKey"])])):(0,A.Q3)("",!0)])}a(4979);var Ce=a(7046),Ae=a(7304),ne=a(2419),Te=a(6753),se=a(9657),re=a(3274),ie=a(9490),oe=a(9203),le=a(7785),ue=a(6234),pe=a(986),ce=a(2803),de=a(1164),me=a(6236),ge=a(9549),he=a(545),fe=a(1653),ye=a(9591);const be=[{title:"Gene",dataIndex:"geneName"},{title:"Spacer",dataIndex:"spacer"},{title:"Operation",dataIndex:"operation"}];function ve(e,t=0){let a=3735928559^t,G=1103547991^t;for(let C,A=0;A<e.length;A++)C=e.charCodeAt(A),a=Math.imul(a^C,2654435761),G=Math.imul(G^C,1597334677);return a=Math.imul(a^a>>>16,2246822507),a^=Math.imul(G^G>>>13,3266489909),G=Math.imul(G^G>>>16,2246822507),G^=Math.imul(a^a>>>13,3266489909),4294967296*(2097151&G)+(a>>>0)}function ke(e){e=btoa("hash"+encodeURIComponent(e));const t=ve(e);let a="#";for(let G=0;G<3;G++){const e=t>>8*G&255;a+=("00"+e.toString(16)).slice(-2)}return a}var _e={name:"StepResult",setup(){const e=(0,m.KR)(null),t=(0,m.KR)(null),a=(0,m.KR)(null);return{columns:be,chartdiv:e,chartdiv_running:t,chartdiv_energy:a,stringToColor:ke,ExportOutlined:Ce.A,CopyOutlined:Ae.A,FileImageOutlined:ne.A,h:A.h}},props:["initParams","geneInfo","sequence20nt","gaParams"],methods:{startGa(){this.status="running",setTimeout((()=>{this.runningPlot(),setTimeout((async()=>{for(let e=0;e<this.gaParams.termination;e++){while(this.isPaused)await new Promise((e=>{setTimeout((()=>{e()}),200)}));let t=await pywebview.api.runGaIter();this.nowIter=e+1,console.log("ga result",e,t),this.series.data.push({x:this.nowIter,y:t})}}),50)}),50)},handleNumChange(e){console.log(e),this.selectNum=e},handleSequenceCopy(e){let t="";for(const a of e)t+=a.sequence;navigator.clipboard.writeText(t),this.$message.success("Sequence copied to clipboard")},handleExportImage(e){console.log(e);let t="";for(const a of e.geneList)t+=a.sequence;pywebview.api.getRnafig(t)},handleExportCopy(){pywebview.api.exportToFile().then((e=>{this.$message.success("CSV exported to "+e),this.openExport=!1})),this.openExport=!1},runningPlot(){console.log(this.chartdiv);const e=Te.b.new(this.chartdiv_running);e.setThemes([ye.A.new(e)]);let t=e.container.children.push(ue.C.new(e,{panX:!1,panY:!1,layout:e.verticalLayout}));const a=[],G=t.yAxes.push(pe.F.new(e,{renderer:ce.Q.new(e,{})}));G.children.unshift(se.J.new(e,{rotation:-90,text:"Minimum MFE (KJ/mol)",y:re.yP,centerX:re.yP}));const C=t.xAxes.push(pe.F.new(e,{min:1,max:this.gaParams.termination,renderer:de.j.new(e,{}),tooltip:ie.m.new(e,{})})),A=t.series.push(me.I.new(e,{xAxis:C,yAxis:G,valueYField:"y",valueXField:"x",sequencedInterpolation:!0,tooltip:ie.m.new(e,{labelText:"{y}"})}));A.data.setAll(a),A.appear(),t.appear(200,50),this.root1=e,window.document.series=A,this.series=A},resultEnergy(){this.root2&&this.root2.dispose();const e=Te.b.new(this.chartdiv_energy);let t=e.container.children.push(ue.C.new(e,{panX:!1,panY:!1}));const a=[],G=t.yAxes.push(pe.F.new(e,{maxDeviation:.3,renderer:ce.Q.new(e,{strokeOpacity:.1})})),C=de.j.new(e,{minGridDistance:30});C.labels.template.setAll({rotation:0,centerY:re.yP,centerX:re.Q2}),C.grid.template.setAll({location:1});const A=t.xAxes.push(ge.a.new(e,{maxDeviation:.3,categoryField:"index",renderer:C,tooltip:ie.m.new(e,{})})),n=t.series.push(he.k.new(e,{xAxis:A,yAxis:G,valueYField:"value",categoryXField:"index",sequencedInterpolation:!0,tooltip:ie.m.new(e,{labelText:"{valueY}"})}));n.columns.template.setAll({cornerRadiusTL:5,cornerRadiusTR:5,strokeOpacity:0}),n.columns.template.adapters.add("fill",(function(e,a){return t.get("colors").getIndex(n.columns.indexOf(a))})),n.columns.template.adapters.add("stroke",(function(e,a){return t.get("colors").getIndex(n.columns.indexOf(a))}));for(const T in this.resultList){const e=this.resultList[T];a.push({index:`#${parseInt(T)+1}`,value:e.freeEnergy})}console.log(a),A.data.setAll(a),n.data.setAll(a),n.appear(),t.appear(200,50),this.root2=e},showResult(){const e=Te.b.new(this.chartdiv);e.dateFormatter.setAll({dateFormat:"yyyy-MM-dd",dateFields:["valueX","openValueX"]}),e.setThemes([ye.A.new(e)]);const t=e.container.children.push(ue.C.new(e,{panX:!0,panY:!1,wheelX:"panX",wheelY:"zoomX",layout:e.verticalLayout})),a=[],G=[];for(let T in this.resultList){const e=new Date("2000-01-01 00:00"),t=e.getMinutes();let C=0,A=this.resultList[T].geneList;T=parseInt(T),a.push({category:"Representation #"+(T+1)},{category:"Basic Group #"+T},{category:" "+T});for(const a of A){G.push({category:"Representation #"+(T+1),fromDate:new Date(e).setMinutes(t+C),toDate:new Date(e).setMinutes(t+C+a.sequence.length),columnSettings:{fill:ke(a.type)},name:a.type});for(const A of a.sequence)G.push({category:"Basic Group #"+T,fromDate:new Date(e).setMinutes(t+C),toDate:new Date(e).setMinutes(t+C+1),columnSettings:{fill:ke(A)},name:`${A}`.toUpperCase()}),C++}}console.log(a);const C=t.yAxes.push(ge.a.new(e,{categoryField:"category",renderer:ce.Q.new(e,{inversed:!0})}));C.get("renderer").labels.template.setAll({oversizedBehavior:"fit",fontSize:16}),C.data.setAll(a);const A=t.xAxes.push(fe.c.new(e,{baseInterval:{timeUnit:"minute",count:1},gridIntervals:[{timeUnit:"minute",count:1},{timeUnit:"minute",count:5},{timeUnit:"minute",count:10},{timeUnit:"minute",count:15},{timeUnit:"minute",count:30}],minZoomCount:60,maxDeviation:0,renderer:de.j.new(e,{strokeOpacity:0})}));A.get("renderer").labels.template.setAll({visible:!1});const n=t.series.push(he.k.new(e,{xAxis:A,yAxis:C,openValueXField:"fromDate",valueXField:"toDate",categoryYField:"category",sequencedInterpolation:!0,tooltip:ie.m.new(e,{pointerOrientation:"vertical"})}));n.columns.template.setAll({templateField:"columnSettings",strokeOpacity:0,tooltipText:"{name}"}),n.data.processor=oe.X.new(e,{dateFields:["fromDate","toDate"],dateFormat:"yyyy-MM-dd HH:mm"}),n.data.setAll(G),t.set("scrollbarX",le.Z.new(e,{orientation:"horizontal",height:12})),n.appear(),t.appear(200,50),this.root=e}},data:()=>({status:"idle",nowIter:0,activeKey:0,openExport:!1,selectNum:"10",exportCsvData:"csv data here",series:null,isPaused:!1,resultList:[{freeEnergy:-276,geneList:[{type:"insulator",sequence:"AGCTGTCACCGGATGTGCTTTCCGGTCTGATGAGTCCGTGAGGACGAAACAGCCTCTACAAATAATTTTGTTTAA"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene1",sequence:"CCAGCACATTCCACAGGGTA"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene2",sequence:"CAGCTAAAATTAGTCGCTTT"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene3",sequence:"TCTTAGTCTTTAAGTTGAGA"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene4",sequence:"ATTCTGCCGGGTCCAGTCTT"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene5",sequence:"TATTATCGCGATCTGTTGCT"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene6",sequence:"GAAGCGTCGATTAGGGTATG"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene7",sequence:"AACCGAGGAACGTACCGCCA"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene8",sequence:"GGCGAAAGAGTGCGATCTGG"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"}]},{freeEnergy:-54,geneList:[{type:"insulator",sequence:"AGCTGTCACCGGATGTGCTTTCCGGTCTGATGAGTCCGTGAGGACGAAACAGCCTCTACAAATAATTTTGTTTAA"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene1",sequence:"GGCTGCCCGTTGAGAAATCC"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene2",sequence:"TGCCGCAGAGTCTGCGCTGC"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene3",sequence:"TCTTAGTCTTTAAGTTGAGA"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene4",sequence:"AAATTAACAATATGATTTAT"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene5",sequence:"GGGGCGTCATGTGGCTATTC"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene6",sequence:"GTATGAGGTTGTCGCAATGT"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene7",sequence:"CATGAACGCCGCAATTCGCG"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene8",sequence:"GCCGATCTTTTTGCTAAAGA"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"}]},{freeEnergy:-169,geneList:[{type:"insulator",sequence:"AGCTGTCACCGGATGTGCTTTCCGGTCTGATGAGTCCGTGAGGACGAAACAGCCTCTACAAATAATTTTGTTTAA"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene1",sequence:"GTTCGTCCAGCACATTCCAC"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene2",sequence:"AATTTGCTGGCTCTCAGGGC"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene3",sequence:"ATCTCTTCAGATTCGGTTTT"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene4",sequence:"CTGTGGCACTGCCTCCAAGA"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene5",sequence:"GCTATTCTGGGTGACCTCCA"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene6",sequence:"TTTCAACGTCCAGACGAGTC"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene7",sequence:"GGTTTTCGATAGCCACGGCG"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene8",sequence:"CATCTGATCGTCGAAGGTTG"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"}]},{freeEnergy:-93,geneList:[{type:"insulator",sequence:"AGCTGTCACCGGATGTGCTTTCCGGTCTGATGAGTCCGTGAGGACGAAACAGCCTCTACAAATAATTTTGTTTAA"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene1",sequence:"GTAAGCGAAGCAAAAGCAGC"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene2",sequence:"ACCCGGCAGCGCAGACTCTG"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene3",sequence:"CCTGCTTGATACCAAAGGTC"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene4",sequence:"GCACCGGTGTTCGAACCCGG"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene5",sequence:"CGTGTATCCACCTTTAAAGA"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene6",sequence:"TCAGGTCCTGATACACGATG"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene7",sequence:"ATCGAAAACCTGAAAAAACG"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene8",sequence:"GGCGAAAGAGTGCGATCTGG"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"}]},{freeEnergy:-135,geneList:[{type:"insulator",sequence:"AGCTGTCACCGGATGTGCTTTCCGGTCTGATGAGTCCGTGAGGACGAAACAGCCTCTACAAATAATTTTGTTTAA"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene1",sequence:"AGTTTCCAGGATTTCTCAAC"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene2",sequence:"GGTTGTCGATGTGCCGGGGC"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene3",sequence:"ATGGGAGAAACTTGCTTTCT"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene4",sequence:"CGCGCCATTGCCCATCTTGG"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene5",sequence:"ACAAAAATCGTTACCACGTT"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene6",sequence:"AGGCAGACCGACTTCCAGAC"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene7",sequence:"ATCGGTGTGTTGACAAGCGG"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"},{type:"gene8",sequence:"GCTGGCGAAATTACAGGATC"},{type:"spacer",sequence:"GTGTCATAGCCCAGCTTGGCGGGCGAAGGCCAAGAC"}]}]}),computed:{legend:function(){const e=new Set;e.add("A"),e.add("T"),e.add("C"),e.add("G");const t=this.resultList[0].geneList;for(const a of t)e.add(a.type);return e}},watch:{openExport(e){if(e){this.exportCsvData="FreeEng,Sequence\n";for(const e of this.resultList){this.exportCsvData+=`${e.freeEnergy}, `;for(const t of e.geneList)this.exportCsvData+=`${t.type}: ${t.sequence}| `;this.exportCsvData+="\n"}}},status(e){"done"===e?setTimeout((()=>{this.resultEnergy()}),1e3):(this.root&&this.root.dispose(),this.root1&&this.root1.dispose()),e!==this.gaParams.termination&&"done"===this.status&&setTimeout((()=>{pywebview.api.getResult().then((e=>{this._resultList=e,this.resultList=e.slice(0,parseInt(this.selectNum)),console.log(e),setTimeout((()=>{this.status="done"}),100)})),this.handleExportCopy()}),100)},selectNum(){setTimeout((()=>{this.resultList=this._resultList.slice(0,parseInt(this.selectNum)),this.resultEnergy()}),100)},nowIter(e){e!==this.gaParams.termination&&"done"!==this.status||setTimeout((()=>{pywebview.api.getResult().then((e=>{this._resultList=e,this.resultList=e.slice(0,parseInt(this.selectNum)),console.log(e),setTimeout((()=>{this.status="done"}),100)})),"done"!==this.status&&this.handleExportCopy()}),200)}}};const Pe=(0,v.A)(_e,[["render",Ge]]);var xe=Pe;function qe(e,t,a,G,C,n){const T=(0,A.g2)("a-input"),s=(0,A.g2)("a-form-item"),r=(0,A.g2)("a-input-number"),i=(0,A.g2)("a-form");return(0,A.uX)(),(0,A.CE)("div",null,[(0,A.bF)(i,{model:e.spacerConfig,"label-col":G.labelCol,"wrapper-col":G.wrapperCol},{default:(0,A.k6)((()=>[(0,A.bF)(s,{label:"match_pattern"},{default:(0,A.k6)((()=>[(0,A.bF)(T,{value:e.spacerConfig.match_pattern,"onUpdate:value":t[0]||(t[0]=t=>e.spacerConfig.match_pattern=t),style:{"margin-left":"16px"}},null,8,["value"])])),_:1}),(0,A.bF)(s,{label:"DNA_bumps_num"},{default:(0,A.k6)((()=>[(0,A.bF)(r,{value:e.spacerConfig.DNA_bumps_num,"onUpdate:value":t[1]||(t[1]=t=>e.spacerConfig.DNA_bumps_num=t),min:0,max:100,step:1,style:{"margin-left":"16px"}},null,8,["value"])])),_:1}),(0,A.bF)(s,{label:"RNA_bumps_num"},{default:(0,A.k6)((()=>[(0,A.bF)(r,{value:e.spacerConfig.RNA_bumps_num,"onUpdate:value":t[2]||(t[2]=t=>e.spacerConfig.RNA_bumps_num=t),min:0,max:100,step:1,style:{"margin-left":"16px"}},null,8,["value"])])),_:1}),(0,A.bF)(s,{label:"mismatches"},{default:(0,A.k6)((()=>[(0,A.bF)(r,{value:e.spacerConfig.mismatches,"onUpdate:value":t[3]||(t[3]=t=>e.spacerConfig.mismatches=t),min:0,max:100,step:1,style:{"margin-left":"16px"}},null,8,["value"])])),_:1})])),_:1},8,["model","label-col","wrapper-col"])])}const Fe={style:{width:"200px"}},we={span:14};var De={name:"StepSpacerConfig",setup(){return{labelCol:Fe,wrapperCol:we}},emits:["updateSpacerConfig","updateSpacerFilterConfig"],methods:{},props:{spacerConfigInput:{type:Object,required:!0},initParamsData:{type:Object,required:!0}},data:()=>({spacerConfig:{match_pattern:"NNNNNNNNNNNNNNNNNNNNNGG",DNA_bumps_num:2,RNA_bumps_num:2,mismatches:3}}),mounted(){if(this.spacerConfig=this.spacerConfigInput,this.initParamsData&&"Cas12a"===this.initParamsData.selectProt){const e=this.initParamsData.targetLength;this.spacerConfig.match_pattern="TTTN"+"N".repeat(e)}this.initParamsData&&"Cas12m"===this.initParamsData.selectProt&&(this.spacerConfig.match_pattern="TTC"+"N".repeat(20)+",TTA"+"N".repeat(20))},watch:{spacerConfig:{deep:!0,handler(e){this.$emit("updateSpacerConfig",e)},immediate:!0}}};const Se=(0,v.A)(De,[["render",qe]]);var Ie=Se;const Ne=(0,m.KR)(0),Ue=()=>{Ne.value++},Le=()=>{Ne.value--},Ee=[{title:"Init Params",content:"init-params"},{title:"Gene Info",content:"gene-info"},{title:"Off-target Search Settings",content:"spacer-params"},{title:"Optional spacer",content:"20nt-sequence"},{title:"GA Params",content:"ga-params"},{title:"Result",content:"result"}],We=Ee.map((e=>({key:e.title,title:e.title})));var Xe={name:"MainView",setup(){return{current:Ne,steps:Ee,items:We,next:Ue,prev:Le,message:g.Ay}},components:{StepInitParams:_,StepGeneInfo:S,ResultChart:L,StepGaParams:R,StepResult:xe,StepSpacerConfig:Ie},methods:{onUpdateInitParamsData(e){this.initParams=e,setTimeout((()=>{pywebview&&pywebview.api.setInitParam(e.geneNumber,e.pamSequence,e.insulatorSequence,e.spacerSequence,e.selectProt,e.targetLength,e.seqPosition)}),1e3)},onUpdateGeneInfoData(e){this.geneInfo=e,pywebview&&pywebview.api.setGeneInfo(e)},onUpdateSequence20nt(e){this.sequence20nt=e,pywebview&&pywebview.api.updateSpacer(e)},onUpdateGaParamsData(e){this.gaParams=e,console.log(e),pywebview&&pywebview.api.setGaParam(e.population,e.termination,e.crossover,e.mutation,e.tournament)}},data:()=>({initParams:{},geneInfo:[],gaParams:{},sequence20nt:[],spacerConfig:{match_pattern:"NNNNNNNNNNNNNNNNNNNNNGG",DNA_bumps_num:2,RNA_bumps_num:2,mismatches:3}})};const Oe=(0,v.A)(Xe,[["render",d],["__scopeId","data-v-3f308d04"]]);var Me=Oe,Re={name:"App",components:{MainView:Me}};const Ke=(0,v.A)(Re,[["render",T]]);var Qe=Ke,Ve=(a(4529),a(4753),a(5045));const $e=(0,G.Ef)(Qe);$e.use(C.Ay).use(Ve.Ay).mount("#app")}},t={};function a(G){var C=t[G];if(void 0!==C)return C.exports;var A=t[G]={id:G,loaded:!1,exports:{}};return e[G].call(A.exports,A,A.exports,a),A.loaded=!0,A.exports}a.m=e,function(){var e=[];a.O=function(t,G,C,A){if(!G){var n=1/0;for(i=0;i<e.length;i++){G=e[i][0],C=e[i][1],A=e[i][2];for(var T=!0,s=0;s<G.length;s++)(!1&A||n>=A)&&Object.keys(a.O).every((function(e){return a.O[e](G[s])}))?G.splice(s--,1):(T=!1,A<n&&(n=A));if(T){e.splice(i--,1);var r=C();void 0!==r&&(t=r)}}return t}A=A||0;for(var i=e.length;i>0&&e[i-1][2]>A;i--)e[i]=e[i-1];e[i]=[G,C,A]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var G in t)a.o(t,G)&&!a.o(e,G)&&Object.defineProperty(e,G,{enumerable:!0,get:t[G]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,G){var C,A,n=G[0],T=G[1],s=G[2],r=0;if(n.some((function(t){return 0!==e[t]}))){for(C in T)a.o(T,C)&&(a.m[C]=T[C]);if(s)var i=s(a)}for(t&&t(G);r<n.length;r++)A=n[r],a.o(e,A)&&e[A]&&e[A][0](),e[A]=0;return a.O(i)},G=self["webpackChunkbioview"]=self["webpackChunkbioview"]||[];G.forEach(t.bind(null,0)),G.push=t.bind(null,G.push.bind(G))}();var G=a.O(void 0,[504],(function(){return a(6103)}));G=a.O(G)})();
//# sourceMappingURL=app.b69e4656.js.map